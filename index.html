<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>THC KING SHOP</title>
<style>
body { font-family: sans-serif; background: #e0f2e9; color: #000; padding: 10px;}
button { background: #2ecc71; color: white; padding: 5px 10px; border: none; margin: 5px; cursor: pointer;}
#chat-box { border:1px solid #aaa; padding:5px; height:150px; overflow-y:scroll; background:white; }
</style>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>

<h2>THC KING SHOP</h2>

<button onclick="signup()">สมัครสมาชิก</button>
<button onclick="login()">ล็อกอิน</button>

<h3>สินค้า</h3>
<button onclick="order('สัตว์บัค', 5)">สัตว์บัค 1M = 5 บาท</button>
<button onclick="order('ความเร็ว',1)">ฟาร์ม ความเร็ว 1B = 1 บาท</button>
<button onclick="order('เพชร',1)">ฟาร์ม เพชร 1B = 1 บาท</button>

<h3>โอนเงิน</h3>
<p>ธนาคาร: กสิกรไทย</p>
<p>เลขบัญชี: 217-1-94289-9</p>
<p>ชื่อบัญชี: ทวีชัย คาล่า</p>
<img src="https://i.postimg.cc/kGJm0R1s/004999223109827-20251207-103924.jpg" alt="QR Code" width="150">

<h3>แชทหาเจ้าของเว็บ</h3>
<div id="chat-box"></div>
<input type="text" id="msg" placeholder="พิมพ์ข้อความ...">
<button onclick="sendMessage()">ส่ง</button>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJECT_ID.firebaseapp.com",
  projectId: "PROJECT_ID",
  storageBucket: "PROJECT_ID.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const auth = firebase.auth();

// สมัครสมาชิก
function signup(){
  const email = prompt("กรอกอีเมล:");
  const password = prompt("ตั้งรหัสผ่าน:");
  auth.createUserWithEmailAndPassword(email,password)
    .then(()=>alert("สมัครสมาชิกเรียบร้อย!"))
    .catch(err=>alert(err.message));
}

// ล็อกอิน
function login(){
  const email = prompt("กรอกอีเมล:");
  const password = prompt("รหัสผ่าน:");
  auth.signInWithEmailAndPassword(email,password)
    .then(()=>alert("ล็อกอินเรียบร้อย!"))
    .catch(err=>alert(err.message));
}

// สั่งซื้อ
function order(product, price){
  const user = auth.currentUser.email;
  const roblox = prompt("กรอกชื่อ Roblox:");
  const amount = prompt("จำนวนที่ต้องการ:");
  db.collection("orders").add({
    user:user, product:product, price:price,
    roblox:roblox, amount:amount,
    timestamp:firebase.firestore.FieldValue.serverTimestamp()
  }).then(()=>alert("สั่งซื้อเรียบร้อย!"));
}

// ส่งข้อความแชท
function sendMessage(){
  const text = document.getElementById("msg").value;
  const user = auth.currentUser.email;
  db.collection("messages").add({
    user:user, message:text,
    timestamp:firebase.firestore.FieldValue.serverTimestamp()
  });
  document.getElementById("msg").value="";
}

// ฟังข้อความเรียลไทม์
db.collection("messages").orderBy("timestamp")
  .onSnapshot(snap=>{
    const box = document.getElementById("chat-box");
    box.innerHTML="";
    snap.forEach(doc=>{
      const data = doc.data();
      box.innerHTML+=`<p><b>${data.user}:</b> ${data.message}</p>`;
    });
  });
</script>

</body>
</html>
